require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["myPagesA/pages/addProject"],{"3c0f":function(e,n,o){},"53ca":function(e,n,o){"use strict";o.d(n,"b",(function(){return a})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){return t}));var t={uRow:function(){return o.e("uview-ui/components/u-row/u-row").then(o.bind(null,"f276"))},uCol:function(){return o.e("uview-ui/components/u-col/u-col").then(o.bind(null,"de6b"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"3cb4"))},uForm:function(){return o.e("uview-ui/components/u-form/u-form").then(o.bind(null,"c6ab"))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,"da4f"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-input/u-input")]).then(o.bind(null,"7412"))},uIcon:function(){return o.e("uview-ui/components/u-icon/u-icon").then(o.bind(null,"1ab1"))},uSelect:function(){return o.e("uview-ui/components/u-select/u-select").then(o.bind(null,"b4f2"))},uModal:function(){return o.e("uview-ui/components/u-modal/u-modal").then(o.bind(null,"acaa"))},uPopup:function(){return o.e("uview-ui/components/u-popup/u-popup").then(o.bind(null,"ee9a"))},uToast:function(){return o.e("uview-ui/components/u-toast/u-toast").then(o.bind(null,"58c7"))}},a=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.streetListShow=!0},e.e1=function(n){e.communityListShow=!0},e.e2=function(n){e.applicationSiteShow=!0})},i=[]},"5e6f":function(e,n,o){"use strict";o.r(n);var t=o("53ca"),a=o("a056");for(var i in a)"default"!==i&&function(e){o.d(n,e,(function(){return a[e]}))}(i);o("d9f2");var u,r=o("f0c5"),s=Object(r["a"])(a["default"],t["b"],t["c"],!1,null,"af49caa4",null,!1,t["a"],u);n["default"]=s.exports},"8d6f":function(e,n,o){"use strict";(function(e){o("99ed");t(o("66fd"));var n=t(o("5e6f"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])},a056:function(e,n,o){"use strict";o.r(n);var t=o("b788"),a=o.n(t);for(var i in t)"default"!==i&&function(e){o.d(n,e,(function(){return t[e]}))}(i);n["default"]=a.a},b788:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t,a=o("cd0c"),i=o("5f22"),u={data:function(){return{show:!1,popupShow:!1,fireManShow:!1,streetListShow:!1,personLiableShow:!1,communityListShow:!1,applicationSiteShow:!1,streetList:[],fireManList:[],personLiableList:[],communityList:[],applicationSiteList:[{value:"客运站、火车站、地铁站、机场、码头",label:"客运站、火车站、地铁站、机场、码头"},{value:"公共供水单位",label:"公共供水单位"},{value:"瓶装燃气储配单位",label:"瓶装燃气储配单位"},{value:"瓶装燃气供应站",label:"瓶装燃气供应站"},{value:"寄递企业",label:"寄递企业"},{value:"物流企业",label:"物流企业"},{value:"加油站",label:"加油站"},{value:"宾馆、旅馆",label:"宾馆、旅馆"},{value:"民宿、农家乐",label:"民宿、农家乐"},{value:"商业综合体",label:"商业综合体"},{value:"出租房（企业员工集体宿舍）",label:"出租房（企业员工集体宿舍）"},{value:"学校、幼儿园",label:"学校、幼儿园"},{value:"网吧",label:"网吧"},{value:"娱乐场所",label:"娱乐场所"},{value:"工矿企业",label:"工矿企业"},{value:"劳动密集型企业",label:"劳动密集型企业"},{value:"建筑工地",label:"建筑工地"},{value:"高层建筑",label:"高层建筑"},{value:"住宅小区（老旧小区）、居民楼",label:"住宅小区（老旧小区）、居民楼"},{value:"教育培训机构",label:"教育培训机构"},{value:"医院、养老院",label:"医院、养老院"},{value:"商场、市场",label:"商场、市场"},{value:"食品生产加工小作坊",label:"食品生产加工小作坊"}],form:{name:"",user:"",phone:"",address:"",fireMan:"",fireManCode:"",applicationSite:"",applicationSiteCode:"",street:"",streetCode:"",personLiable:"",personLiableCode:"",community:"",communityCode:"",lanlat:""},adcode:"",content:"",rules:{name:[{required:!0,message:"请输入姓名",trigger:["change","blur"]}],address:[{required:!0,message:"请选择地址",trigger:["change","blur"]}],fireMan:[{required:!0,message:"请选择防火员",trigger:"change"}],personLiable:[{required:!0,message:"请选择责任人",trigger:"change"}],street:[{required:!0,message:"请选择所在街道",trigger:["change","blur"]}],community:[{required:!0,message:"请选择所在社区",trigger:["change","blur"]}],applicationSite:[{required:!0,message:"请选择应用场所",trigger:["change","blur"]}],phone:[{min:11,max:11,pattern:/^\d{11,11}$/,message:"手机号不超过11位或小于",trigger:"change"}],user:[{required:!0,message:"请输入姓名",trigger:"change"}]}}},methods:{addTrue:function(){var n,o,t,i=this;(0,a.addLegalFireMan)(this.addPerpoState,this.form.user,e.getStorageSync("userName"),this.form.phone,this.form.remake,n,o,t).then((function(e){"true"==e.data.list[0].status?(i.$refs.uToast.show({title:"添加成功",type:"success"}),i.popupShow=!1):i.$refs.uToast.show({title:e.data.list[0].mess,type:"error"})}))},addPerpo:function(e){this.popupShow=!0,this.addPerpoState=e},addProjectTrue:function(){"项目添加成功!"==this.content&&e.navigateTo({url:"/myPagesA/pages/project"})()},fireManSearch:function(e){var n;"fireMan"==e&&""!=this.form.fireMan?(this.fireManShow=!0,n=this.form.fireMan):"person"==e&&""!=this.form.personLiable&&(this.personLiableShow=!0,n=this.form.personLiable);var o=[];(/^\d{4,11}$/.test(n)||isNaN(n))&&(this.options=this.arr.filter((function(e){return e.user_name.toLowerCase().indexOf(n.toLowerCase())>-1||e.phone.toLowerCase().indexOf(n.toLowerCase())>-1}))),""!=n&&(this.options.forEach((function(e){o.push({value:e.pid,label:"".concat(e.user_name).concat(e.phone)})})),"fireMan"==e?this.fireManList=o:this.personLiableList=o)},personLiableFocus:function(e){var n=this;console.log(e),(0,a.getLegalFireMan)(e,"").then((function(o){n.arr=JSON.parse(o.data.mess),n.arr.forEach((function(o){0==e?(n.fireManList.push({value:o.pid,label:"".concat(o.user_name).concat(o.phone)}),n.fireManList=n.fireManList.slice(0,30)):(n.personLiableList.push({value:o.pid,label:"".concat(o.user_name).concat(o.phone)}),n.personLiableList=n.personLiableList.slice(0,30))})),n.$forceUpdate()}))},applicationSiteChange:function(e,n){console.log(e,n),this.form.applicationSite=e[0].label,this.form.applicationSiteCode=e[0].value},personLiableChange:function(e,n){console.log(e,n),this.form.personLiable=e[0].label,this.form.personLiableCode=e[0].value},communityListChange:function(e,n){console.log(e,n),this.form.community=e[0].label,this.form.communityCode=e[0].value},streetChange:function(e,n){console.log(e,n),this.form.street=e[0].label,this.form.streetCode=e[0].value,this.regionListFun(e[0].value.substring(0,9),2)},fireManChange:function(e,n){console.log(e,n),this.form.fireMan=e[0].label,this.form.fireManCode=e[0].value},regionListFun:function(e,n){var o=this;(0,a.regionList)(e).then((function(e){console.log(e,"woshiresresresre"),e.data.mess.forEach((function(e,t){1==n?o.streetList.push({value:e.ad_Code,label:e.ad_Region}):o.communityList.push({value:e.ad_Code,label:e.ad_Region})}))}))},s:function(){var n=this;e.chooseLocation({success:function(e){console.log("位置名称："+e.name),console.log("详细地址："+e.address),console.log("纬度："+e.latitude),console.log("经度："+e.longitude),console.log(e),n.form.address=e.address,n.form.lanlat=e.longitude+","+e.latitude,console.log(n.form.address,22),t.geocoder({address:e.address,success:function(e){console.log(e,222222221111),0==e.status&&"query ok"==e.message&&(n.adcode=e.result.ad_info.adcode,console.log(n.adcode),n.regionListFun(e.result.ad_info.adcode,1))}})}})},submit:function(){var n=this;console.log(this.form,"ssss"),this.$refs.uForm.validate((function(o){o?(n.show=!0,(0,a.addProject)(e.getStorageSync("userName"),n.form.name,n.form.address,n.form.fireManCode,n.form.personLiableCode,n.form.remak,n.form.lanlat,n.form.applicationSiteCode,n.form.communityCode,"","").then((function(e){console.log(e.data.list[0].status,"ssqqq"),n.content=e.data.list[0].mess}))):console.log("验证失败")}))}},onReady:function(){this.$refs.uForm.setRules(this.rules)},onLoad:function(){t=new i({key:"N4PBZ-HR433-DBT3H-YGIXH-XR5ZQ-ULFKW"})}};n.default=u}).call(this,o("543d")["default"])},d9f2:function(e,n,o){"use strict";var t=o("3c0f"),a=o.n(t);a.a}},[["8d6f","common/runtime","common/vendor","myPagesA/common/vendor"]]]);